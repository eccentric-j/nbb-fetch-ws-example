
import { $APP, shadow$provide, $jscomp } from "./nbb_api.js";
import  "./nbb_impl_main.js";
import  "./nbb_core.js";
const shadow_esm_import = function(x) { return import(x) };
'use strict';var sra=function(a){return $APP.n($APP.cx.existsSync(a))?$APP.cx.readFileSync(a,"utf-8"):null},tra=function(a){return $APP.we(a)?$APP.z(a):a},n4=function(a){console.error($APP.Np.h(" ",a))},o4=function(a){for(var b=[],c=arguments.length,d=0;;)if(d<c)b.push(arguments[d]),d+=1;else break;n4(0<b.length?new $APP.Bd(b.slice(0),0,null):null)},p4=function(a){throw $APP.Tm.h(["Unexpected format: ",$APP.r.g(a)].join(""),new $APP.k(null,1,[$APP.cpa,a],null));},q4=function(a){var b=JSON.parse(a);
return"number"===typeof b?b:p4(a)},ura=function(a){var b=JSON.parse(a);return $APP.Me(b)?b:p4(a)},vra=function(a){var b=JSON.parse(a);return $APP.Ke(b)?b:p4(a)},r4=function(a){var b=JSON.parse(a);return $APP.Fe(b)?b:p4(a)},wra=function(a){var b=$APP.T.g(a);return $APP.n(b)?$APP.mj.j(a,$APP.T,b.Kd(null)):a},s4=function(a){return $APP.C.h(":",0<a.length?a.charAt(0):null)?$APP.Vj.g($APP.Mj.h(a,1)):$APP.Vj.g(a)},t4=function(a,b){b-=$APP.ce(a);return[$APP.r.g(a),$APP.Np.g($APP.nt.h(b," "))].join("")},
u4=function(a){n4($APP.E([$APP.$g.O($APP.r,"----- ",a," ",$APP.nt.h(43-$APP.ce(a),"-"))]))},xra=function(a){return $APP.Ye.j(function(b,c){var d=$APP.D.j(c,0,null);c=$APP.D.j(c,1,null);c=$APP.Fg(c);var e=$APP.Ne.h(c,$APP.a3),f=$APP.Ne.h(c,$APP.c3);c=$APP.Ne.h(c,$APP.Tn);b=$APP.n(e)?$APP.go.O(b,$APP.a3,$APP.mj,d,e):b;b=$APP.n(f)?$APP.go.j(b,$APP.Ws,function(g){if($APP.Pe(g,f))throw $APP.Tm.h(["Conflicting alias ",$APP.r.g(f)," between ",$APP.r.g($APP.Ne.h(g,f))," and ",$APP.r.g(d)].join(""),new $APP.k(null,
1,[$APP.c3,f],null));return $APP.mj.j(g,f,d)}):b;return $APP.n(c)?$APP.go.O(b,$APP.$2,$APP.mj,d,c):b},$APP.Eg,a)},v4=function(a,b,c){a=$APP.Ne.h(a,b);c=$APP.n(a)?a:$APP.we(c)?$APP.ne(c):null;return $APP.n(c)?$APP.we(c)?$APP.st.h($APP.$f,c):c:null},w4=function(a,b,c,d){return $APP.lj.h(b,c)?$APP.go.j(a,b,function(e){return null==e?$APP.n(d)?d.h?d.h(e,!0):d.call(null,e,!0):!0:$APP.n(d)?d.h?d.h(e,!0):d.call(null,e,!0):e}):a},x4=function(a){return $APP.nj(a,new $APP.I(null,8,5,$APP.J,[$APP.T,$APP.P,$APP.dI,
$APP.Qm,$APP.Rm,$APP.Vn,$APP.At,$APP.Pq],null))},y4=function(a){if("string"===typeof a)try{var b=0<a.length?a.charAt(0):null;if($APP.C.h("true",a)||$APP.C.h("false",a))var c=r4(a);else{if($APP.mb(isNaN(a)))var d=q4(a);else{var e=$APP.C.h(":",b);var f=e?$APP.Ij(/:?[a-zA-Z0-9]+/,a):e;d=$APP.n(f)?s4(a):a}c=d}return c}catch(g){return a}else return a},yra=function(a){var b=function(){var e=$APP.se(a);return $APP.n(e)?e:a}(),c=$APP.He(a)?$APP.z(a):null,d=function(){var e=$APP.tv.g(b);return $APP.n(e)?e:
null==c?null:$APP.se(c)}();d=$APP.C.h($APP.wt,$APP.vt.g(d))?$APP.mj.j(d,$APP.T,$APP.T.g(b)):d;return $APP.x($APP.rh.h($APP.Gg,new $APP.I(null,2,5,$APP.J,[x4(b),x4(d)],null)))},zra=function(a){a=$APP.kk(a);a=$APP.lu.h(function(c){var d=$APP.Fg(c);c=$APP.Ne.h(d,$APP.P);var e=$APP.Ne.h(d,$APP.Qm),f=$APP.Ne.h(d,$APP.T),g=$APP.Ne.h(d,$APP.Rm),l=$APP.Ne.h(d,$APP.Vn),q=$APP.Ne.h(d,$APP.At);d=$APP.Ne.h(d,$APP.dI);return $APP.n($APP.n(g)?g:q)?new $APP.k(null,2,[$APP.P,[$APP.r.g($APP.n(c)?[$APP.r.g(f),"/",
$APP.r.g(c)].join(""):f),$APP.n(d)?["#",$APP.r.g(d)].join(""):null].join(""),$APP.Ep,[$APP.r.g($APP.n(e)?e:$APP.n(q)?"\x3cbuilt-in\x3e":"\x3cexpr\x3e"),$APP.n(g)?[":",$APP.r.g(g),":",$APP.r.g(l)].join(""):null].join("")],null):null},a);var b=$APP.Ye.j($APP.ho,0,$APP.Uj.h($APP.xu.h($APP.ce,$APP.P),a));return $APP.Es.h(function(c){var d=$APP.Fg(c);c=$APP.Ne.h(d,$APP.P);d=$APP.Ne.h(d,$APP.Ep);var e=b-$APP.ce(c);return[[$APP.r.g(c),$APP.Np.g($APP.nt.h(e," "))].join("")," - ",$APP.r.g(d)].join("")},a)},
Ara=function(a){a=$APP.t(a);a=$APP.LC.g(a);var b=$APP.ph.l(yra,$APP.E([a]));a=$APP.Ye.j(function(c,d){var e=$APP.D.j(c,0,null),f=$APP.D.j(c,1,null),g=$APP.D.j(c,2,null),l=$APP.D.j(c,3,null);c=function(){var w=$APP.P.g(d);return $APP.n(w)?w:l}();var q=function(){var w=$APP.Qm.g(d);return $APP.n(w)?w:f}();g=g===$APP.T.g(d)?$APP.mj.l(d,$APP.P,c,$APP.E([$APP.Qm,q])):d;return new $APP.I(null,4,5,$APP.J,[$APP.$f.h(e,g),q,$APP.T.g(d),c],null)},function(){var c=$APP.z(b);return new $APP.I(null,4,5,$APP.J,
[$APP.Ed,$APP.Qm.g(c),$APP.T.g(c),$APP.P.g(c)],null)}(),b);return $APP.Es.h(wra,$APP.z(a))},Bra=function(a){a=null==a?null:$APP.cl(a);a=null==a?null:$APP.Wq.g(a);return null==a?null:Ara(a)},Cra=function(a){a=$APP.dk.g(a);var b=$APP.hg(a)?$APP.dk.h($APP.r.g(a),"-main"):a,c=$APP.fg(b);return $APP.Vl("(require '$1) (apply $2 *command-line-args*)",/\$(\d)/,function(d){d=$APP.ie(d);switch(d){case "1":return c;case "2":return b;default:throw Error(["No matching clause: ",$APP.r.g(d)].join(""));}})},Dra=
function(a,b){if($APP.n(b))return new $APP.I(null,1,5,$APP.J,[a],null);b=$APP.ce(a);return 10>=b?new $APP.I(null,1,5,$APP.J,[a],null):new $APP.I(null,2,5,$APP.J,[$APP.jh.h(5,a),$APP.kh.h(b-5,a)],null)},Era=function(a){var b=$APP.Fg($APP.cl(a)),c=$APP.Ne.h(b,$APP.Qm),d=$APP.Ne.h(b,$APP.Rm);b=$APP.Ne.h(b,$APP.Vn);if($APP.n($APP.n(c)?d:c)&&(c=sra(c),$APP.n(c))){var e=d-1;d=function(){var g=e-4;return 0<g?g:0}();c=$APP.lh(e-d+1,$APP.jh.h(e+6-d,$APP.kh.h(d,$APP.ZB.h($APP.K,$APP.bm(c)))));d=$APP.D.j(c,
0,null);c=$APP.D.j(c,1,null);a=$APP.N.l(d,new $APP.I(null,1,5,$APP.J,[new $APP.I(null,2,5,$APP.J,[null,[$APP.Np.h("",$APP.nt.h(b-1," ")),["^--- ",$APP.r.g($APP.dl(a))].join("")].join("")],null)],null),$APP.E([c]));b=$APP.Uj.h($APP.z,a);var f=$APP.Ye.j($APP.ho,0,$APP.Uj.h($APP.xu.h($APP.ce,$APP.r),b));a=$APP.Uj.h(function(g){var l=$APP.D.j(g,0,null);g=$APP.D.j(g,1,null);return $APP.n(l)?[$APP.r.g([$APP.r.g(l+1),":"].join("").padStart(f,"0"))," ",$APP.r.g(g)].join(""):[$APP.Np.g($APP.nt.h(2+f," ")),
$APP.r.g(g)].join("")},a);return $APP.Np.h("\n",a)}return null},Fra=function(a){var b=$APP.Ye.j($APP.ho,0,$APP.Uj.h($APP.xu.h($APP.ce,$APP.r),$APP.gj(a)))+2;n4($APP.E([function(){var c=new $APP.Ra,d=$APP.eb,e=$APP.fb;$APP.eb=!0;$APP.fb=function(fa){return c.append(fa)};try{var f=$APP.bb,g=$APP.Oj;$APP.bb=10;$APP.Oj=2;try{for(var l=$APP.x(a),q=null,w=0,u=0;;)if(u<w){var A=q.S(null,u),m=$APP.D.j(A,0,null),F=$APP.D.j(A,1,null);$APP.FC.l($APP.E([t4([$APP.r.g(m),": "].join(""),b)]));$APP.HC.l($APP.E([F]));
u+=1}else{var M=$APP.x(l);if(M){var U=M;if($APP.De(U)){var W=$APP.$c(U),Y=$APP.ad(U);U=W;var ba=$APP.ce(W);l=Y;q=U;w=ba}else{var ka=$APP.z(U),ma=$APP.D.j(ka,0,null),qa=$APP.D.j(ka,1,null);$APP.FC.l($APP.E([t4([$APP.r.g(ma),": "].join(""),b)]));$APP.HC.l($APP.E([qa]));l=$APP.B(U);q=null;w=0}u=0}else break}}finally{$APP.Oj=g,$APP.bb=f}}finally{$APP.fb=e,$APP.eb=d}return $APP.r.g(c)}()]))},Gra=function(a){var b=$APP.Fg(null);b=$APP.Ne.h(b,$APP.apa);a=zra(a);b=Dra(a,b);a=$APP.D.j(b,0,null);b=$APP.D.j(b,
1,null);$APP.nk(function(c){return $APP.FC.l($APP.E([c,"\n"]))},a);$APP.n(b)&&($APP.FC.l($APP.E(["...\n"])),$APP.nk(function(c){return $APP.FC.l($APP.E([c,"\n"]))},b))},Hra=function(a,b){var c=Bra(a),d=$APP.cl(a),e=$APP.Hk($APP.Om.g(d));u4("Error");var f=a.name;$APP.n(f)&&($APP.C.h("Error",f)||n4($APP.E(["Type:    ",f])));f=a.message;$APP.n(f)&&n4($APP.E([["Message:  ",$APP.r.g(f)].join("")]));$APP.n($APP.pZ.g(b))&&(f=$APP.cl($APP.el(a)),$APP.n(f)&&($APP.FC.l($APP.E(["Data:     "])),$APP.HC.l($APP.E([f]))));
var g=$APP.Fg(d);f=$APP.Ne.h(g,$APP.Qm);var l=$APP.Ne.h(g,$APP.Rm);g=$APP.Ne.h(g,$APP.Vn);$APP.n(l)&&n4($APP.E([["Location: ",$APP.n(f)?[$APP.r.g(f),":"].join(""):null,$APP.r.g(l),":",$APP.r.g(g),""].join("")]));f=$APP.tt.g(d);$APP.n(f)&&n4($APP.E(["Phase:   ",f]));a=e?Era(a):null;$APP.n(a)&&(o4(),u4("Context"),n4($APP.E([a])));$APP.n($APP.pZ.g(b))&&(b=$APP.Gg($APP.Zoa.g(d)),$APP.n(b)&&(u4("Locals"),Fra(b)));e&&(e=function(){var q=function(){var w=new $APP.Ra,u=$APP.eb,A=$APP.fb;$APP.eb=!0;$APP.fb=
function(m){return w.append(m)};try{$APP.n(c)&&Gra(c)}finally{$APP.fb=A,$APP.eb=u}return $APP.r.g(w)}();return $APP.cm(q)?null:q}(),$APP.n(e)&&(o4(),u4("Stack trace"),n4($APP.E([e]))))},z4=function(a,b){var c=function(){switch(b instanceof $APP.H?b.ga:null){case "boolean":return r4;case "int":case "long":return vra;case "double":return ura;case "number":return q4;case "symbol":return $APP.dk;case "keyword":return s4;case "string":return $APP.bf;case "edn":return $APP.OT;case "auto":return y4;default:return b}}();
if("string"===typeof a){try{var d=c.g?c.g(a):c.call(null,a)}catch(e){d=$APP.V2}if($APP.C.h($APP.V2,d))throw $APP.Tm.h(["Coerce failure: cannot transform input ",$APP.qk.l($APP.E([a])),b instanceof $APP.H?" to ":" with ",$APP.r.g(b instanceof $APP.H?$APP.wj(b):b)].join(""),new $APP.k(null,2,[$APP.$oa,a,$APP.Yoa,b],null));return d}return a},Ira=function(a,b,c,d,e){d=$APP.n($APP.n(d)?!$APP.we(d):d)?z4(e,d):y4(e);return $APP.n(c)?$APP.go.D(a,b,c,d):$APP.mj.j(a,b,d)},Jra=function(a){var b=new $APP.k(null,
1,[$APP.Ws,new $APP.k(null,2,[$APP.dpa,$APP.iQ,$APP.bpa,$APP.mF],null)],null),c=$APP.Xoa.g(b);b=$APP.n(c)?$APP.Im.l($APP.E([b,$APP.n(c)?xra(c):null])):b;var d=$APP.a3.g(b),e=$APP.Ws.g(b),f=$APP.Woa.g(b),g=$APP.$2.g(b),l=$APP.Voa.g(b);a=$APP.Gj(function(m){var F=$APP.n(l)?null:$APP.Da(m,":");return!($APP.n(F)?F:$APP.Da(m,"-"))},a);var q=$APP.D.j(a,0,null),w=$APP.D.j(a,1,null);a=function(){var m=$APP.x(q);return null==m?null:$APP.Mh(m)}();var u=function(){for(var m=$APP.n(g)?g:$APP.Eg,F=null,M=null,
U=$APP.n(l)?$APP.b3:null,W=$APP.x(w);;){if($APP.mb(W))return new $APP.I(null,3,5,$APP.J,[m,F,M],null);var Y=$APP.z(W),ba=v4(f,F,$APP.Ne.h(d,F)),ka=0<Y.length?Y.charAt(0):null,ma=$APP.C.h(ka,"-"),qa=function(){var S=U;return $APP.n(S)?S:ma?$APP.b3:null}(),fa=$APP.C.h(":",ka),p=$APP.lj.h($APP.b3,qa)&&fa&&($APP.mb(F)||$APP.C.h(M,F));ka=function(){var S=qa;return $APP.n(S)?S:p?$APP.U2:null}();if(ma||p){var y=(fa=$APP.Da(Y,"--"))&&$APP.C.h("--",Y);if(y){var Q=$APP.B(W);return new $APP.I(null,3,5,$APP.J,
[function(){var S=m;return Q?$APP.$o.D(S,$APP.ar,new $APP.I(null,2,5,$APP.J,[$APP.Z2,$APP.WS],null),$APP.Mh(Q)):S}(),F,M],null)}Y=fa?$APP.Mj.h(Y,2):$APP.Vl(Y,/^(:|-|)/,"");Y=fa?$APP.am.h(Y,/=/):new $APP.I(null,1,5,$APP.J,[Y],null);fa=$APP.D.j(Y,0,null);Y=$APP.D.j(Y,1,null);fa=$APP.Vj.g(fa);fa=$APP.Ne.j(e,fa,fa);$APP.n(Y)?(F=w4(m,F,M,ba),M=fa,W=$APP.cg(Y,$APP.Fd(W)),m=F,F=M,M=null,U=ka):(F=w4(m,F,M,ba),ba=fa,W=$APP.B(W),m=F,F=ba,U=ka)}else{var R=$APP.Ne.h(d,F);if(y=$APP.C.h($APP.Uoa,R)&&$APP.mb(M)&&
$APP.lj.h(Y,"true")&&$APP.lj.h(Y,"false")||$APP.C.h(M,F)&&$APP.mb(ba))return new $APP.I(null,3,5,$APP.J,[$APP.$o.D(m,$APP.ar,new $APP.I(null,2,5,$APP.J,[$APP.Z2,$APP.WS],null),$APP.Mh(W)),F,null],null);M=Ira(m,F,ba,tra(R),Y);ba=$APP.C.h($APP.U2,ka)&&fa?null:F;Y=$APP.C.h($APP.U2,ka)&&fa?null:F;W=$APP.B(W);m=M;F=ba;M=Y;U=ka}}}();b=$APP.D.j(u,0,null);c=$APP.D.j(u,1,null);u=$APP.D.j(u,2,null);var A=v4(f,c,$APP.Ne.h(z4,c));b=w4(b,c,u,A);return $APP.n(a)?$APP.$o.D(b,$APP.ar,new $APP.I(null,2,5,$APP.J,[$APP.Z2,
$APP.DO],null),a):b},Kra=function(a){for(var b=$APP.Eg,c=a;;)if($APP.n(c)){var d=$APP.z(c);a=$APP.B(c);switch(d){case "--help":case "-h":return $APP.mj.j(b,$APP.mF,!0);case "--version":case "-v":return $APP.mj.j(b,$APP.T2,!0);case "-e":b=$APP.mj.j(b,$APP.bp,$APP.z(a));c=a=$APP.B(a);continue;case "-m":case "--main":return $APP.mj.l(b,$APP.bp,Cra($APP.z(a)),$APP.E([$APP.WS,$APP.B(a)]));case "-cp":case "--classpath":b=$APP.mj.j(b,$APP.lZ,$APP.z(a));c=a=$APP.B(a);continue;case "--config":b=$APP.mj.j(b,
$APP.KL,$APP.z(a));c=a=$APP.B(a);continue;case "--debug":b=$APP.mj.j(b,$APP.pZ,!0);c=a;continue;case "nrepl-server":b=$APP.mj.j(b,$APP.Y2,!0);c=a;continue;case "socket-repl":b=$APP.mj.j(b,$APP.W2,!0);c=a;continue;case ":port":case "--port":b=$APP.mj.j(b,$APP.mZ,$APP.z(a));c=a=$APP.B(a);continue;case ":host":case "--host":b=$APP.mj.j(b,$APP.nZ,$APP.z(a));c=a=$APP.B(a);continue;case "repl":b=$APP.mj.j(b,$APP.X2,!0);c=a;continue;case "bundle":c=$APP.mj;d=c.j;a=Jra(a);var e=$APP.Z2.g($APP.se(a));a=$APP.mj.j(e,
$APP.it,$APP.Jm.h(a,$APP.Z2));return d.call(c,b,$APP.rO,a);default:if($APP.mb($APP.bp.g(c)))return $APP.mj.l(b,$APP.d3,d,$APP.E([$APP.WS,$APP.B(c)]));throw $APP.Tm.h(["Unrecognized options:",$APP.r.g(c)].join(""),$APP.Eg);}}else return b},Lra=function(){var a=$APP.x(process.argv);$APP.z(a);a=$APP.B(a);$APP.z(a);a=$APP.B(a);var b=Kra(a),c=$APP.n($APP.KL.g(b))?$APP.mj.j(b,$APP.KL,$APP.PT.g($APP.cx.readFileSync($APP.KL.g(b),"utf8"))):function(){var l=$APP.n($APP.cx.existsSync("nbb.edn"))?$APP.PT.g($APP.cx.readFileSync("nbb.edn",
"utf8")):null;return $APP.n(l)?$APP.mj.j(b,$APP.KL,l):b}();$APP.dh($APP.epa,c);a=$APP.d3.g(c);var d=$APP.bp.g(c),e=$APP.lZ.g(c),f=process.cwd();$APP.Rp(f);$APP.n(e)&&$APP.Rp(e);e=$APP.Y2.g(c);f=function(){var l=$APP.X2.g(c);if($APP.n(l))return l;l=$APP.W2.g(c);return $APP.n(l)?l:$APP.ve($APP.Jm.l(c,$APP.lZ,$APP.E([$APP.pZ,$APP.KL])))}();var g=$APP.rO.g(c);$APP.n($APP.mF.g(c))&&($APP.GC.l($APP.E([$APP.Pa("nbb"),"version:",$APP.Jx()])),$APP.GC.l($APP.E(["\nHelp:\n\n -h / --help: print this help text and exit.\n -v / --version: print the current version of nbb.\n\nGlobal options:\n\n --debug: print additional debug info.\n -cp / --classpath: set the classpath.\n\nEvaluation:\n\n -e: execute expression.\n -m / --main: execute main function.\n\nREPL:\n\n repl: start console REPL.\n nrepl-server: start nrepl server. [1,2]\n socket-repl: start socket repl server. [1]\n\n 1: Provide :port \x3cport\x3e to specify port.\n 2: Provide :host \x3chost\x3e to specify host.\n\nTooling:\n\n  bundle: produce single JS file for usage with bundlers.\n"])),
process.exit(0));$APP.n($APP.T2.g(c))&&($APP.GC.l($APP.E([["nbb v",$APP.Jx()].join("")])),process.exit(0));$APP.dh($APP.qW,c);$APP.n(f)&&$APP.dZ($APP.Op.resolve("script.cljs"));$APP.n($APP.n(a)?a:$APP.n(d)?d:$APP.n(e)?e:$APP.n(f)?f:g)?($APP.oW.h($APP.sW,$APP.bh($APP.WS.g(c))),$APP.n($APP.KL.g(c))&&shadow_esm_import("./nbb_deps.js"),($APP.n(a)?$APP.eZ(a):$APP.n(d)?$APP.fZ(d):$APP.n($APP.Y2.g(c))?shadow_esm_import("./nbb_nrepl_server.js"):$APP.n($APP.n(f)?$APP.W2.g(c):f)?shadow_esm_import("./nbb_repl.js").then(function(){var l=
new $APP.k(null,1,[$APP.mZ,$APP.mZ.g(c)],null),q=$APP.Ne.h($APP.Ne.h($APP.$q.g($APP.t($APP.Uq.g($APP.Ow()))),$APP.tO),$APP.qZ);return q.g?q.g(l):q.call(null,l)}):$APP.n($APP.rO.g(c))?shadow_esm_import("./nbb_bundler.js"):$APP.n(f)?shadow_esm_import("./nbb_repl.js").then(function(){var l=$APP.Ne.h($APP.Ne.h($APP.$q.g($APP.t($APP.Uq.g($APP.Ow()))),$APP.tO),$APP.oZ);return l.v?l.v():l.call(null)}):null).then(function(l){$APP.n($APP.n(d)?null!=l:d)&&$APP.HC.l($APP.E([l]));return l}).catch(function(l){Hra(l,
c);$APP.n($APP.pZ.g(c))&&console.error($APP.r.g(l));throw Error($APP.dl(l));})):console.error("Usage: nbb \x3cscript\x3e or nbb -e \x3cexpr\x3e.")};process.on("unhandledRejection",function(a){console.error($APP.dl(a));return process.exitCode=1});try{Lra()}catch(a){throw console.error("An error occurred when calling (nbb.main/main)"),a;};
export { $APP, shadow$provide, $jscomp };
